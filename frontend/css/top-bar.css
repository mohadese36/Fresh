
/* test commit */



header.header {
  background: var(--meat-cream-100) !important;
  position: sticky !important;
  top: 0;
    z-index: 1100;
  /* will-change: transform !important; */
  /* transition: box-shadow 0.25s ease, background-color 0.25s ease; */
}

/* حالت عادی */
header.header .top-bar {
  position: relative;
  background-image: url("../images/logo/header-img.jpg");
  background-repeat: no-repeat;
  background-position: center top;   /* دقیقاً بالا ثابت بمونه */
  background-size: 100% auto;
  background-attachment: scroll;     
  isolation: isolate;
  padding: 3rem 0;
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.08);
  transition: padding 0.25s ease, box-shadow 0.25s ease, background-position 0.25s ease;
}

/* حالت بعد از اسکرول */
header.header.is-scrolled .top-bar {
  padding: 0 !important;                   
  background-position: center -20px;     
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);
}




/* ///////////////////// */
.top-bar__content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: clamp(0.5rem, 2vw, 1rem);
  max-width: 1240px;
  margin-inline: auto;
  padding-inline: clamp(20px, 4.5vw, 40px);
}

/* لوگوی واکنش‌گرا */
.top-bar .top-bar__left .brand__logo {
  height: clamp(72px, 12vw, 124px);
  max-inline-size: clamp(180px, 26vw, 320px);
  inline-size: auto;
  object-fit: contain;
  display: block;
}

/* کنترل‌ها */
.top-bar__right {
  display: flex;
  align-items: center;
  gap: clamp(0.6rem, 2vw, 1rem)
}

/* دکمه‌ها (واکنش‌گرا) */
.top-bar .top-bar__right > :is(a, button) {
  appearance: none;
  border: 2px solid var(--meat-yellow-600);
  /* background: var(--meat-yellow-400) !important; */
  background: var(--meat-cream-200);
  color: var(--meat-brown-700) !important;

  font-size: clamp(0.78rem, 1.5vw, 1.1rem);
  font-weight: 600;        
  line-height: 1.1;

  padding-block: clamp(0.35rem, 1.2vw, 0.8rem);    
  padding-inline: clamp(0.7rem, 2vw, 1.2rem);     

  border-radius: 1rem;
  display: inline-flex;
  align-items: center;
  gap: clamp(0.25rem, 1vw, 0.5rem); 

  box-shadow: 0 2px 6px rgba(16, 24, 40, 0.14);
  cursor: pointer;
  transition: transform 1s ease, box-shadow 1s ease, filter 1s ease;
}

.main-header__profile-text  {
   font-family: var(--font-poetsen);
} 

.logout-text {
font-family: var(--font-poetsen);
text-transform: lowercase;
}

/* حالت هاور/فوکوس */
.top-bar .top-bar__right > :is(a,button):hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 28px rgba(16,24,40,.14);
  filter: saturate(1.06);
}
.top-bar .top-bar__right > :is(a,button):focus-visible {
  outline: 3px solid color-mix(in srgb, var(--meat-yellow-600,#fcb917) 55%, transparent);
  outline-offset: 2px;
}


/* به‌صورت پیش‌فرض: دیده میشه (زیر 993px) */
.top-bar .top-bar__right > *:nth-child(2) {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 !important;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 0.35rem;
  cursor: pointer;
}

/* نوارهای داخل دکمه همبرگر */
.top-bar .top-bar__right > *:nth-child(2) > .main-header__toggle-bar {
  display: block;
  width: clamp(22px, 5vw, 32px);
  height: clamp(2px, 0.6vw, 3px);
  background-color: var(--brand-500);
  border-radius: 2px;
  transition: all 0.2s ease-in-out;

}



.top-bar .top-bar__right > *:nth-child(3) {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  color: var(--meat-olive-800) !important;
  position: relative;
  padding: 0 !important;
  min-width: auto !important;
  min-height: auto !important;
  margin-inline: clamp(0.2rem, 1.2vw, 0.6rem);
}

.main-header__cart-icon {
  font-size: clamp(1.4rem, 4vw, 2rem);
  line-height: 1;
}


.top-bar .top-bar__right > *:nth-child(4) {
  color: var(--heading-olive, #293b24) !important;
}

.main-header__cart-btn{ position: relative !important; overflow: visible !important; }

#cart-count-badge{
  position: absolute !important;
  border: 2px solid var(--meat-cream-200);
  inset-block-start: -6px !important;   /* بالا */
  inset-inline-end: -6px !important;    /* راست */
  left: auto !important; top: auto !important;
  transform: none !important;
  margin: 0 !important;
  z-index: 1;
}


@supports(selector(:has(*))) {
  .main-header__cart-btn:has(#cart-count-badge) {
    position: relative !important;
  }

  .main-header__cart-btn #cart-count-badge {
    font-size: clamp(0.65rem, 0.4vw + 0.7rem, 1rem);
    position: absolute !important;
    inset-block-start: clamp(-4px, -0.3vw, 0px) !important;
    inset-inline-end: clamp(-4px, -0.3vw, 0px) !important;
    transform: translate(50%, -50%) !important;
    margin: 0 !important;
  }
}


/* ========= [ Breakpoint: 990px ↓ ] ========= */
@media (max-width: 991.98px) {

  header.header {
    z-index: 100;
  }
  
  header.header .top-bar {
    padding: 1rem 0 0 !important;
  }

  .top-bar .top-bar__right > *:nth-child(2) {
    display: inline-flex !important;
  }

  /* مخفی‌سازی کامل main-header */
  .main-header {
    display: none;
  }

  .searchbar {
    flex: 1;
    max-width: 500px;
    margin: 0 1rem;
  }


}

/* ====== فقط موبایل و کوچکتر ====== */
@media (max-width: 767.98px) {
  header.header{ position: relative; z-index: 1000;}
  /* 1) والد: از فلکس به گرید (لوگو + 4 ستون اکشن) */
  .top-bar .top-bar__content{
    display: grid !important;
    grid-template-columns: minmax(128px, 1fr) repeat(4, auto);
    grid-auto-rows: auto;
    align-items: center;
    column-gap: .5rem;
    row-gap: .75rem;
    justify-content: initial !important; 
    transform: none !important;
  }
  header.header .top-bar {
    box-shadow: none !important;
  }
  /* 2) لوگو در ستون 1، ردیف 1 */
  .top-bar .top-bar__left{
    grid-column: 1 !important;
    grid-row: 1 !important;
  }

  /* 3) ترفند: فرزندانِ right مستقیماً آیتم‌های گرید بشن */
  .top-bar .top-bar__right{
    display: contents !important;
    transform: none !important; /* ایمن‌سازی */
  }

  /* 4) سرچ‌بار: ردیف دوم، اسپن کل عرض (وسط‌چین) */
  .top-bar .searchbar.desktop-search{
    display: inline-flex !important;
    grid-column: 1 / -1 !important;
    grid-row: 2 !important;
    justify-self: center;
    width: min(92vw, 680px);
    transform: none !important; 
  }

    .offcanvas-nav{
    width: 100vw;
    max-width: 100vw;
    border-radius: 12px 12px 0 0;
  }
    /* اگر راستِ تاپ‌بار wrap می‌زند، سرچ ردیف دوم و تمام‌عرض */
  .top-bar__right{ flex-wrap: wrap; align-content: flex-start; gap: clamp(8px, 2vw, 12px); }

  form.searchbar.desktop-search{
    order: 2;                 /* ردیف دوم */
    flex: 0 0 100%;
    width: 100%;
    transform: none !important; translate: 0 !important;  /* ضد جابجایی ناخواسته */
  }

  form.searchbar.desktop-search .Landing__searchBar-input{
    width: 100%; min-width: 0;
  }

  /* تأکید: پنل دقیقاً زیر فرم و هم‌عرض */
  form.searchbar.desktop-search > .search-results-container:not(:empty){
    top: calc(100% + .5rem) !important;
  }
}

@media (max-width: 576.98px){
  .top-bar{
    background-image: url('../images/logo/header-img-cut-two-gaps.png'); /* نسخهٔ برش‌خورده‌ای که ساختیم */
    background-repeat:no-repeat; background-position:center top;
    background-size: 100% auto;   
    transform-origin: top center;
  }
  .top-bar > .container-fluid{ position: relative; z-index:1; }

    .searchbar.desktop-search {
    display: inline-flex !important;
    width: min(92vw, 460px);
  }

}

@media (max-width: 464.98px){

  .top-bar .top-bar__content{
    grid-template-columns: minmax(96px, 1fr) repeat(4, auto) !important;
    row-gap: 0 !important;
  }

  /* لوگو هم کمی جمع‌تر تا ستون 1 فشار نیاره */
  .brand__logo{
    height: clamp(62px, 17vw, 78px) !important;
    max-inline-size: clamp(130px, 27vw, 230px) !important;
  }
}

